var cakecanvas,cakepen,renderer,canvas,board,svg_board;!function(e,t){function s(e){return e>0&&0==(e-1&e)}var a=[1,0,0,0,1,0,0,0,1],n=function(e,t){var s=e[0],a=e[1],n=e[2],r=e[3],o=e[4],i=e[5],l=e[6],h=e[7],p=e[8],g=t[0],d=t[1],c=t[2],_=t[3],f=t[4],m=t[5],v=t[6],u=t[7],y=t[8];t[0]=g*s+_*a+v*n,t[1]=d*s+f*a+u*n,t[2]=c*s+m*a+y*n,t[3]=g*r+_*o+v*i,t[4]=d*r+f*o+u*i,t[5]=c*r+m*o+y*i,t[6]=g*l+_*h+v*p,t[7]=d*l+f*h+u*p,t[8]=c*l+m*h+y*p};function r(e){return this.clearStack(e)}r.prototype.clearStack=function(e){this.m_stack=[],this.m_cache=[],this.c_stack=0,this.valid=0,this.result=null;for(var t=0;t<16;t++)this.m_stack[t]=this.getIdentity();void 0!==e?this.m_stack[0]=e:this.setIdentity()},r.prototype.setIdentity=function(){this.m_stack[this.c_stack]=this.getIdentity(),this.valid===this.c_stack&&this.c_stack&&this.valid--},r.prototype.getIdentity=function(){return[1,0,0,0,1,0,0,0,1]},r.prototype.getResult=function(){if(!this.c_stack)return this.m_stack[0];var e=a;this.valid>this.c_stack-1&&(this.valid=this.c_stack-1);for(var t=this.valid;t<this.c_stack+1;t++)e=n(this.m_stack[t],e),this.m_cache[t]=e;return this.valid=this.c_stack-1,this.result=this.m_cache[this.c_stack],this.result},r.prototype.pushMatrix=function(){this.c_stack++,this.m_stack[this.c_stack]=this.getIdentity()},r.prototype.popMatrix=function(){0!==this.c_stack&&this.c_stack--};var o=r.prototype.getIdentity();r.prototype.translate=function(e,t){o[6]=e,o[7]=t,n(o,this.m_stack[this.c_stack])};var i=r.prototype.getIdentity();r.prototype.scale=function(e,t){i[0]=e,i[4]=t,n(i,this.m_stack[this.c_stack])};var l=r.prototype.getIdentity();r.prototype.rotate=function(t){var s,a;s=e.sin(-t),a=e.cos(-t),l[0]=a,l[3]=s,l[1]=-s,l[4]=a,n(l,this.m_stack[this.c_stack])};var h=this.WebGL2D=function(e,t){var s;this.canvas=e,this.options=t||{},this.gl=void 0,this.fs=void 0,this.vs=void 0,this.shaderProgram=void 0,this.transform=new r,this.shaderPool=[],this.maxTextureSize=void 0,e.gl2d=this,e.$getContext=e.getContext,e.getContext=(s=this,function(t){if(!s.options.force&&"webgl-2d"!==t||0===e.width||0===e.height)return s.canvas.$getContext(t);if(s.gl)return s.gl;var a=s.gl=s.canvas.$getContext("experimental-webgl");return s.initShaders(),s.initBuffers(),s.initCanvas2DAPI(),a.viewport(0,0,s.canvas.width,s.canvas.height),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT),a.colorMask(1,1,1,0),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),s.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),a}),this.postInit()};h.enable=function(e,t){return e.gl2d||new h(e,t)};var p,g,d=1,c=2;h.prototype.getFragmentShaderSource=function(e){return["#ifdef GL_ES","precision highp float;","#endif","#define hasTexture "+(e&d?"1":"0"),"#define hasCrop "+(e&c?"1":"0"),"varying vec4 vColor;","#if hasTexture","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","#if hasCrop","uniform vec4 uCropSource;","#endif","#endif","void main(void) {","#if hasTexture","#if hasCrop","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x * uCropSource.z, vTextureCoord.y * uCropSource.w) + uCropSource.xy);","#else","gl_FragColor = texture2D(uSampler, vTextureCoord);","#endif","#else","gl_FragColor = vColor;","#endif","}"].join("\n")},h.prototype.getVertexShaderSource=function(e,t){var s=2/this.canvas.width,a=-2/this.canvas.height;return["#define hasTexture "+(t&d?"1":"0"),"attribute vec4 aVertexPosition;","#if hasTexture","varying vec2 vTextureCoord;","#endif","uniform vec4 uColor;","uniform mat3 uTransforms["+(e=e||1)+"];","varying vec4 vColor;","const mat4 pMatrix = mat4("+s+",0,0,0, 0,"+a+",0,0, 0,0,1.0,1.0, -1.0,1.0,0,0);","mat3 crunchStack(void) {","mat3 result = uTransforms[0];","for (int i = 1; i < "+e+"; ++i) {","result = uTransforms[i] * result;","}","return result;","}","void main(void) {","vec3 position = crunchStack() * vec3(aVertexPosition.x, aVertexPosition.y, 1.0);","gl_Position = pMatrix * vec4(position, 1.0);","vColor = uColor;","#if hasTexture","vTextureCoord = aVertexPosition.zw;","#endif","}"].join("\n")},h.prototype.initShaders=function(e,t){var s=this.gl;e=e||1,t=t||0;var a=this.shaderPool[e];if(a||(a=this.shaderPool[e]=[]),a=a[t])return s.useProgram(a),this.shaderProgram=a,a;var n=this.fs=s.createShader(s.FRAGMENT_SHADER);if(s.shaderSource(this.fs,this.getFragmentShaderSource(t)),s.compileShader(this.fs),!s.getShaderParameter(this.fs,s.COMPILE_STATUS))throw"fragment shader error: "+s.getShaderInfoLog(this.fs);var r=this.vs=s.createShader(s.VERTEX_SHADER);if(s.shaderSource(this.vs,this.getVertexShaderSource(e,t)),s.compileShader(this.vs),!s.getShaderParameter(this.vs,s.COMPILE_STATUS))throw"vertex shader error: "+s.getShaderInfoLog(this.vs);var o=this.shaderProgram=s.createProgram();if(o.stackDepth=e,s.attachShader(o,n),s.attachShader(o,r),s.linkProgram(o),!s.getProgramParameter(o,s.LINK_STATUS))throw"Could not initialise shaders.";s.useProgram(o),o.vertexPositionAttribute=s.getAttribLocation(o,"aVertexPosition"),s.enableVertexAttribArray(o.vertexPositionAttribute),o.uColor=s.getUniformLocation(o,"uColor"),o.uSampler=s.getUniformLocation(o,"uSampler"),o.uCropSource=s.getUniformLocation(o,"uCropSource"),o.uTransforms=[];for(var i=0;i<e;++i)o.uTransforms[i]=s.getUniformLocation(o,"uTransforms["+i+"]");return this.shaderPool[e][t]=o,o};var _=new Float32Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]);h.prototype.initBuffers=function(){var e=this.gl;p=e.createBuffer(),e.createBuffer(),g=e.createBuffer(),e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,p),e.bufferData(e.ARRAY_BUFFER,_,e.STATIC_DRAW)},h.instances=[],h.prototype.postInit=function(){h.instances.push(this)},h.prototype.initCanvas2DAPI=function(){var e=this,t=this.gl,a=document.createElement("canvas");a.width=e.canvas.width,a.height=e.canvas.height;var n=a.getContext("2d"),r=/^rgb(a)?\(\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,?\s*(-?[\d\.]+)?\s*\)$/,o=/^hsl(a)?\(\s*(-?[\d\.]+)\s*,\s*(-?[\d\.]+)%\s*,\s*(-?[\d\.]+)%\s*,?\s*(-?[\d\.]+)?\s*\)$/,i=/^#([0-9A-Fa-f]{6})$/,l=/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/;function h(e){var t,s,a,n,p,g,d=[];if(t=r.exec(e)){if(n=t[1],p=parseFloat(t[8]),n&&isNaN(p)||!n&&!isNaN(p))return!1;g=t[3];for(var c=2;c<8;c+=2){if(s=t[c],(a=t[c+1])!==g)return!1;s=a?(s=s>100?1:s/100)<0?0:s:(s=s>255?1:s/255)<0?0:s,d.push(s)}d.push(n?p:1)}else if(t=o.exec(e))n=t[1],p=parseFloat(t[5]),d=function(e,t,s,a){var n,r;function o(e){return 6*e<1?n+(r-n)*e*6:2*e<1?r:3*e<2?n+(r-n)*(2/3-e)*6:n}return t=(t=t>100?1:t/100)<0?0:t,n=2*(s=(s=s>100?1:s/100)<0?0:s)-(r=s<=.5?s*(t+1):s+t-s*t),[o((e=(e%360+360)%360/360)+1/3),o(e),o(e-1/3),a]}(t[2],t[3],t[4],parseFloat(n&&p?p:1));else if(t=i.exec(e)){var _=parseInt(t[1],16);d=[((16711680&_)>>16)/255,((65280&_)>>8)/255,(255&_)/255,1]}else if(t=l.exec(e)){d=h("#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join(""))}else if(e.toLowerCase()in f)d=h(f[e.toLowerCase()]);else{if("transparent"!==e.toLowerCase())return!1;d=[0,0,0,0]}return d}function _(e){return"rgba("+255*e[0]+", "+255*e[1]+", "+255*e[2]+", "+parseFloat(e[3])+")"}var f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},m={},v=[];m.fillStyle=[0,0,0,1],Object.defineProperty(t,"fillStyle",{get:function(){return _(m.fillStyle)},set:function(e){m.fillStyle=h(e)||m.fillStyle}}),m.strokeStyle=[0,0,0,1],Object.defineProperty(t,"strokeStyle",{get:function(){return _(m.strokeStyle)},set:function(e){m.strokeStyle=h(e)||drawStyle.strokeStyle}}),t.$lineWidth=t.lineWidth,m.lineWidth=1,Object.defineProperty(t,"lineWidth",{get:function(){return m.lineWidth},set:function(e){t.$lineWidth(e),m.lineWidth=e}}),m.lineCap="butt",Object.defineProperty(t,"lineCap",{get:function(){return m.lineCap},set:function(e){m.lineCap=e}}),m.lineJoin="miter",Object.defineProperty(t,"lineJoin",{get:function(){return m.lineJoin},set:function(e){m.lineJoin=e}}),m.miterLimit=10,Object.defineProperty(t,"miterLimit",{get:function(){return m.miterLimit},set:function(e){m.miterLimit=e}}),m.shadowOffsetX=0,Object.defineProperty(t,"shadowOffsetX",{get:function(){return m.shadowOffsetX},set:function(e){m.shadowOffsetX=e}}),m.shadowOffsetY=0,Object.defineProperty(t,"shadowOffsetY",{get:function(){return m.shadowOffsetY},set:function(e){m.shadowOffsetY=e}}),m.shadowBlur=0,Object.defineProperty(t,"shadowBlur",{get:function(){return m.shadowBlur},set:function(e){m.shadowBlur=e}}),m.shadowColor="rgba(0, 0, 0, 0.0)",Object.defineProperty(t,"shadowColor",{get:function(){return m.shadowColor},set:function(e){m.shadowColor=e}}),m.font="10px sans-serif",Object.defineProperty(t,"font",{get:function(){return m.font},set:function(e){n.font=e,m.font=e}}),m.textAlign="start",Object.defineProperty(t,"textAlign",{get:function(){return m.textAlign},set:function(e){m.textAlign=e}}),m.textBaseline="alphabetic",Object.defineProperty(t,"textBaseline",{get:function(){return m.textBaseline},set:function(e){m.textBaseline=e}}),m.globalAlpha=1,Object.defineProperty(t,"globalAlpha",{get:function(){return m.globalAlpha},set:function(e){m.globalAlpha=e}}),m.globalCompositeOperation="source-over",Object.defineProperty(t,"globalCompositeOperation",{get:function(){return m.globalCompositeOperation},set:function(e){m.globalCompositeOperation=e}}),t.fillText=function(s,r,o){n.clearRect(0,0,e.canvas.width,e.canvas.height),n.fillStyle=t.fillStyle,n.fillText(s,r,o),t.drawImage(a,0,0)},t.strokeText=function(){},t.measureText=function(){return 1};var u=document.createElement("canvas").getContext("2d");function y(s){for(var a=e.transform.m_stack,n=0,r=e.transform.c_stack+1;n<r;++n)t.uniformMatrix3fv(s.uTransforms[n],!1,a[r-1-n])}t.save=function(){var t;e.transform.pushMatrix(),t={fillStyle:[m.fillStyle[0],m.fillStyle[1],m.fillStyle[2],m.fillStyle[3]],strokeStyle:[m.strokeStyle[0],m.strokeStyle[1],m.strokeStyle[2],m.strokeStyle[3]],globalAlpha:m.globalAlpha,globalCompositeOperation:m.globalCompositeOperation,lineCap:m.lineCap,lineJoin:m.lineJoin,lineWidth:m.lineWidth,miterLimit:m.miterLimit,shadowColor:m.shadowColor,shadowBlur:m.shadowBlur,shadowOffsetX:m.shadowOffsetX,shadowOffsetY:m.shadowOffsetY,textAlign:m.textAlign,font:m.font,textBaseline:m.textBaseline},v.push(t)},t.restore=function(){e.transform.popMatrix(),v.length&&(m=v.pop())},t.translate=function(t,s){e.transform.translate(t,s)},t.rotate=function(t){e.transform.rotate(t)},t.scale=function(t,s){e.transform.scale(t,s)},t.createImageData=function(e,t){return u.createImageData(e,t)},t.getImageData=function(e,s,a,n){var r=u.createImageData(a,n),o=new Uint8Array(a*n*4);t.readPixels(e,s,a,n,t.RGBA,t.UNSIGNED_BYTE,o);for(var i=4*a,l=n,h=0,p=l/2;h<p;++h)for(var g=0,d=i;g<d;++g){var c=h*i+g,_=(l-h-1)*i+g;r.data[c]=o[_],r.data[_]=o[c]}return r},t.putImageData=function(e,s,a){t.drawImage(e,s,a)},t.transform=function(t,s,a,n,r,o){var i=e.transform.m_stack[e.transform.c_stack];i[0]*=t,i[1]*=a,i[2]*=r,i[3]*=s,i[4]*=n,i[5]*=o,i[6]=0,i[7]=0},t.setTransform=function(s,a,n,r,o,i){e.transform.setIdentity(),t.transform.apply(this,arguments)},t.fillRect=function(s,a,n,r){var o=e.transform,i=e.initShaders(o.c_stack+2,0);t.bindBuffer(t.ARRAY_BUFFER,p),t.vertexAttribPointer(i.vertexPositionAttribute,4,t.FLOAT,!1,0,0),o.pushMatrix(),o.translate(s,a),o.scale(n,r),y(i),t.uniform4f(i.uColor,m.fillStyle[0],m.fillStyle[1],m.fillStyle[2],m.fillStyle[3]),t.drawArrays(t.TRIANGLE_FAN,0,4),o.popMatrix()},t.strokeRect=function(s,a,n,r){var o=e.transform,i=e.initShaders(o.c_stack+2,0);t.bindBuffer(t.ARRAY_BUFFER,p),t.vertexAttribPointer(i.vertexPositionAttribute,4,t.FLOAT,!1,0,0),o.pushMatrix(),o.translate(s,a),o.scale(n,r),y(i),t.uniform4f(i.uColor,m.strokeStyle[0],m.strokeStyle[1],m.strokeStyle[2],m.strokeStyle[3]),t.drawArrays(t.LINE_LOOP,0,4),o.popMatrix()},t.clearRect=function(e,t,s,a){};var k=[];function b(e,t){this.closed=!1,this.verts=[e,t,0,0]}function x(s){var a=e.transform,n=e.initShaders(a.c_stack+2,0),r=k[s].verts;t.bindBuffer(t.ARRAY_BUFFER,g),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.vertexAttribPointer(n.vertexPositionAttribute,4,t.FLOAT,!1,0,0),a.pushMatrix(),y(n),t.uniform4f(n.uColor,m.fillStyle[0],m.fillStyle[1],m.fillStyle[2],m.fillStyle[3]),t.drawArrays(t.TRIANGLE_FAN,0,r.length/4),a.popMatrix()}function w(s){var a=e.transform,n=e.initShaders(a.c_stack+2,0),r=k[s],o=r.verts;t.bindBuffer(t.ARRAY_BUFFER,g),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),t.vertexAttribPointer(n.vertexPositionAttribute,4,t.FLOAT,!1,0,0),a.pushMatrix(),y(n),t.uniform4f(n.uColor,m.strokeStyle[0],m.strokeStyle[1],m.strokeStyle[2],m.strokeStyle[3]),r.closed?t.drawArrays(t.LINE_LOOP,0,o.length/4):t.drawArrays(t.LINE_STRIP,0,o.length/4),a.popMatrix()}t.beginPath=function(){k.length=0},t.closePath=function(){if(k.length){var e=k[k.length-1],t=e.verts[0],s=e.verts[1];e.closed=!0;var a=new b(t,s);k.push(a)}},t.moveTo=function(e,t){k.push(new b(e,t))},t.lineTo=function(e,s){k.length?k[k.length-1].verts.push(e,s,0,0):t.moveTo(e,s)},t.quadraticCurveTo=function(e,t,s,a){},t.bezierCurveTo=function(e,t,s,a,n,r){},t.arcTo=function(){},t.rect=function(e,s,a,n){t.moveTo(e,s),t.lineTo(e+a,s),t.lineTo(e+a,s+n),t.lineTo(e,s+n),t.closePath()},t.arc=function(e,t,s,a,n,r){},t.fill=function(){for(var e=0;e<k.length;e++)x(e)},t.stroke=function(){for(var e=0;e<k.length;e++)w(e)},t.clip=function(){},t.isPointInPath=function(){},t.drawFocusRing=function(){};var A=[],S=[];function T(a){if(this.obj=t.createTexture(),this.index=S.push(this),A.push(a),a.width>e.maxTextureSize||a.height>e.maxTextureSize){var n=document.createElement("canvas");n.width=a.width>e.maxTextureSize?e.maxTextureSize:a.width,n.height=a.height>e.maxTextureSize?e.maxTextureSize:a.height,n.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,n.width,n.height),a=n}t.bindTexture(t.TEXTURE_2D,this.obj),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),s(a.width)&&s(a.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.bindTexture(t.TEXTURE_2D,null)}t.drawImage=function(s,a,n,r,o,i,l,h,g){var _=e.transform;_.pushMatrix();var f=d,m=!1;3===arguments.length?(_.translate(a,n),_.scale(s.width,s.height)):5===arguments.length?(_.translate(a,n),_.scale(r,o)):9===arguments.length&&(_.translate(i,l),_.scale(h,g),f|=c,m=!0);var v,u=e.initShaders(_.c_stack,f),k=A.indexOf(s);v=-1!==k?S[k]:new T(s),m&&t.uniform4f(u.uCropSource,a/s.width,n/s.height,r/s.width,o/s.height),t.bindBuffer(t.ARRAY_BUFFER,p),t.vertexAttribPointer(u.vertexPositionAttribute,4,t.FLOAT,!1,0,0),t.bindTexture(t.TEXTURE_2D,v.obj),t.activeTexture(t.TEXTURE0),t.uniform1i(u.uSampler,0),y(u),t.drawArrays(t.TRIANGLE_FAN,0,4),_.popMatrix()}}}(Math);var text_svg,index=biggest_x=biggest_y=0,webgl_texts=0,u=void 0,no_use="none",domvg_polygon_points="",infinite="indefinite",body=document.body,dom_shapes=svg_shapes=[],dom_svgs=dom_svgs_shapes=svg_anims=[],texts=images=[],WEBGL="WEBGL",CANVAS="CANVAS",SVG="SVG",DOM="DOM";window.update=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/t)}};var crosskit={compatible_width:window.innerWidth-25,compatible_height:window.innerHeight-25,version:"0.8.7",init:function(e){(renderer=e.renderer.toString())==CANVAS&&((canvas=document.createElement("canvas")).width=e.w,canvas.height=e.h,canvas.style.position="relative",canvas.style.left="8px",body.parentNode.appendChild(canvas),cakecanvas=document.getElementsByTagName("canvas")[index],cakepen=cakecanvas.getContext("2d")),renderer==SVG&&((cakecanvas=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width",e.w),cakecanvas.setAttribute("height",e.h),body.appendChild(cakecanvas)),renderer==WEBGL&&((canvas=document.createElement("canvas")).width=e.w,canvas.height=e.h,canvas.style.position="relative",canvas.style.left="8px",body.parentNode.appendChild(canvas),cakecanvas=canvas,WebGL2D.enable(cakecanvas),cakepen=cakecanvas.getContext("webgl-2d")),renderer==DOM&&((board=document.createElement("div")).id="board",board.style.width=e.w,board.style.height=e.h,board.style.position="relative",board.style.bottom="3px",body.appendChild(board),cakecanvas=board,(svg_board=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width",e.w),svg_board.setAttribute("height",e.h),svg_board.style.zIndex=1,board.appendChild(svg_board)),index++,console.info("%cCROSSKIT "+crosskit.version+"\nRendering Mode: "+renderer,"font-size: 32px; background-color: purple; color: white; font-family: monospace;")},line:function(e){renderer!=CANVAS&&renderer!=WEBGL||(cakepen.globalAlpha=e.a,cakepen.strokeStyle=e.stroke,cakepen.lineWidth=e.line_width,cakepen.rotate(e.angle/50),cakepen.beginPath(),cakepen.moveTo(e.pos1[0],e.pos1[1]),cakepen.lineTo(e.pos2[0],e.pos2[1]),cakepen.lineTo(e.pos1[0],e.pos1[1]),cakepen.closePath(),cakepen.stroke(),cakepen.globalAlpha=1,cakepen.rotate(-e.angle)),renderer==DOM&&(e.pos1[0]>biggest_x&&(biggest_x=e.pos1[0]),e.pos1[1]>biggest_y&&(biggest_y=e.pos1[1]),e.pos2[0]>biggest_x&&(biggest_x=e.pos2[0]),e.pos2[1]>biggest_y&&(biggest_y=e.pos2[1]),dom_svgs_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","line")),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("x1",e.pos1[0].toString()),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("y1",e.pos1[1].toString()),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("x2",e.pos2[0].toString()),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("y2",e.pos2[1].toString()),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("stroke",e.stroke),dom_svgs_shapes[dom_svgs_shapes.length-1].style.strokeWidth=e.line_width,dom_svgs_shapes[dom_svgs_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_svgs_shapes[dom_svgs_shapes.length-1].style.opacity=e.a,svg_board.appendChild(dom_svgs_shapes[dom_svgs_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","line")),svg_shapes[svg_shapes.length-1].setAttribute("x1",e.pos1[0].toString()),svg_shapes[svg_shapes.length-1].setAttribute("y1",e.pos1[1].toString()),svg_shapes[svg_shapes.length-1].setAttribute("x2",e.pos2[0].toString()),svg_shapes[svg_shapes.length-1].setAttribute("y2",e.pos2[1].toString()),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.strokeWidth=e.line_width,svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1]))},rect:function(e){renderer!=CANVAS&&renderer!=WEBGL||(cakepen.globalAlpha=e.a,cakepen.fillStyle=e.fill,cakepen.strokeStyle=e.stroke,cakepen.rotate(e.angle/50),null!=e.r&&null!=e.r&&0!=e.r||(cakepen.fillRect(e.x,e.y,e.w,e.h),cakepen.strokeRect(e.x,e.y,e.w,e.h)),e.r>0&&(cakepen.beginPath(),cakepen.moveTo(e.x+e.r,e.y),cakepen.lineTo(e.x+e.w-e.r,e.y),cakepen.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.r),cakepen.lineTo(e.x+e.w,e.y+e.h-e.r),cakepen.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.r,e.y+e.h),cakepen.lineTo(e.x+e.r,e.y+e.h),cakepen.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.r),cakepen.lineTo(e.x,e.y+e.r),cakepen.quadraticCurveTo(e.x,e.y,e.x+e.r,e.y),cakepen.closePath(),cakepen.fill(),cakepen.stroke()),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(dom_shapes.push(document.createElement("div")),dom_shapes[dom_shapes.length-1].style.backgroundColor=e.fill,dom_shapes[dom_shapes.length-1].style.border="2px "+e.stroke+" solid",dom_shapes[dom_shapes.length-1].style.position="absolute",dom_shapes[dom_shapes.length-1].style.width=e.w+"px",dom_shapes[dom_shapes.length-1].style.height=e.h+"px",dom_shapes[dom_shapes.length-1].style.top=e.y+"px",dom_shapes[dom_shapes.length-1].style.left=e.x+"px",dom_shapes[dom_shapes.length-1].style.borderRadius=e.r+"px",dom_shapes[dom_shapes.length-1].style.opacity=e.a,dom_shapes[dom_shapes.length-1].style.transform="rotate("+e.angle+"deg)",cakecanvas.appendChild(dom_shapes[dom_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","rect")),svg_shapes[svg_shapes.length-1].setAttribute("x",e.x),svg_shapes[svg_shapes.length-1].setAttribute("y",e.y),svg_shapes[svg_shapes.length-1].setAttribute("width",e.w),svg_shapes[svg_shapes.length-1].setAttribute("height",e.h),svg_shapes[svg_shapes.length-1].setAttribute("rx",e.r),svg_shapes[svg_shapes.length-1].setAttribute("ry",e.r),svg_shapes[svg_shapes.length-1].setAttribute("fill",e.fill),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1]))},square:function(e){renderer!=CANVAS&&renderer!=WEBGL||(cakepen.globalAlpha=e.a,cakepen.fillStyle=e.fill,cakepen.strokeStyle=e.stroke,cakepen.rotate(e.angle/50),cakepen.fillRect(e.x,e.y,e.size,e.size),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(dom_shapes.push(document.createElement("div")),dom_shapes[dom_shapes.length-1].style.backgroundColor=e.fill,dom_shapes[dom_shapes.length-1].style.border="2px "+e.stroke+" solid",dom_shapes[dom_shapes.length-1].style.position="absolute",dom_shapes[dom_shapes.length-1].style.width=e.size/2+"px",dom_shapes[dom_shapes.length-1].style.height=e.size/2+"px",dom_shapes[dom_shapes.length-1].style.top=e.y-2*e.size+"px",dom_shapes[dom_shapes.length-1].style.left=e.x-2*e.size+"px",dom_shapes[dom_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_shapes[dom_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(dom_shapes[dom_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","rect")),svg_shapes[svg_shapes.length-1].setAttribute("x",e.x),svg_shapes[svg_shapes.length-1].setAttribute("y",e.y),svg_shapes[svg_shapes.length-1].setAttribute("width",e.size),svg_shapes[svg_shapes.length-1].setAttribute("height",e.size),svg_shapes[svg_shapes.length-1].setAttribute("fill",e.fill),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1]))},pixel:function(e){renderer!=CANVAS&&renderer!=WEBGL||(cakepen.globalAlpha=e.a,cakepen.fillStyle=e.color,cakepen.rotate(e.angle/50),cakepen.fillRect(e.x,e.y,1,1),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(dom_shapes.push(document.createElement("div")),dom_shapes[dom_shapes.length-1].style.backgroundColor=e.color,dom_shapes[dom_shapes.length-1].style.position="absolute",dom_shapes[dom_shapes.length-1].style.width="1px",dom_shapes[dom_shapes.length-1].style.height="1px",dom_shapes[dom_shapes.length-1].style.top=e.y+"1px",dom_shapes[dom_shapes.length-1].style.left=e.x+"1px",dom_shapes[dom_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_shapes[dom_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(dom_shapes[dom_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","rect")),svg_shapes[svg_shapes.length-1].setAttribute("x",e.x),svg_shapes[svg_shapes.length-1].setAttribute("y",e.y),svg_shapes[svg_shapes.length-1].setAttribute("width",1),svg_shapes[svg_shapes.length-1].setAttribute("height",1),svg_shapes[svg_shapes.length-1].setAttribute("color",e.color),svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1]))},roundedrect:function(e){if(renderer==CANVAS&&(cakepen.globalAlpha=e.a,cakepen.fillStyle=e.fill,cakepen.strokeStyle=e.stroke,cakepen.rotate(e.angle/50),cakepen.beginPath(),cakepen.moveTo(e.x+e.r,e.y),cakepen.lineTo(e.x+e.w-e.r,e.y),cakepen.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.r),cakepen.lineTo(e.x+e.w,e.y+e.h-e.r),cakepen.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.r,e.y+e.h),cakepen.lineTo(e.x+e.r,e.y+e.h),cakepen.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.r),cakepen.lineTo(e.x,e.y+e.r),cakepen.quadraticCurveTo(e.x,e.y,e.x+e.r,e.y),cakepen.closePath(),cakepen.fill(),cakepen.stroke(),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(dom_shapes.push(document.createElement("div")),dom_shapes[dom_shapes.length-1].style.backgroundColor=e.fill,dom_shapes[dom_shapes.length-1].style.border="2px "+e.stroke+" solid",dom_shapes[dom_shapes.length-1].style.position="absolute",dom_shapes[dom_shapes.length-1].style.width=e.w/2+"px",dom_shapes[dom_shapes.length-1].style.height=e.h/2+"px",dom_shapes[dom_shapes.length-1].style.borderRadius=e.r+"px",dom_shapes[dom_shapes.length-1].style.top=e.y-2*e.h+"px",dom_shapes[dom_shapes.length-1].style.left=e.x-2*e.w+"px",dom_shapes[dom_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_shapes[dom_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(dom_shapes[dom_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","rect")),svg_shapes[svg_shapes.length-1].setAttribute("x",e.x),svg_shapes[svg_shapes.length-1].setAttribute("y",e.y),svg_shapes[svg_shapes.length-1].setAttribute("width",e.w),svg_shapes[svg_shapes.length-1].setAttribute("height",e.h),svg_shapes[svg_shapes.length-1].setAttribute("rx",e.r),svg_shapes[svg_shapes.length-1].setAttribute("ry",e.r),svg_shapes[svg_shapes.length-1].setAttribute("fill",e.fill),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1])),renderer==WEBGL){var t,s,a,n;for(null==e.angle&&(e.angle=0),cakepen.globalAlpha=e.a,cakepen.fillStyle=e.fill,cakepen.strokeStyle=e.fill,cakepen.rotate(e.angle/50),t=0;t<360;t+=.1)s=t,a=e.r*Math.cos(s*Math.PI/180),n=e.r*Math.sin(s*Math.PI/180),cakepen.fillRect(e.x+a+e.r,e.y+n+e.r,1.5*e.r,1.5*e.r),cakepen.strokeRect(e.x+a+e.r,e.y+n+e.r,1.5*e.r,1.5*e.r);cakepen.rotate(-e.angle),cakepen.globalAlpha=1}},circle:function(e){if(renderer==CANVAS&&(cakepen.globalAlpha=e.a,cakepen.fillStyle=e.fill,cakepen.strokeStyle=e.stroke,cakepen.rotate(e.angle/50),cakepen.beginPath(),cakepen.arc(e.x,e.y,e.r,90,180*Math.PI),cakepen.closePath(),cakepen.fill(),cakepen.stroke(),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(dom_shapes.push(document.createElement("div")),dom_shapes[dom_shapes.length-1].style.backgroundColor=e.fill,dom_shapes[dom_shapes.length-1].style.border="2px "+e.stroke+" solid",dom_shapes[dom_shapes.length-1].style.position="absolute",dom_shapes[dom_shapes.length-1].style.width=1.85*e.r+"px",dom_shapes[dom_shapes.length-1].style.height=1.85*e.r+"px",dom_shapes[dom_shapes.length-1].style.borderRadius="50%",dom_shapes[dom_shapes.length-1].style.top=e.y-e.r+"px",dom_shapes[dom_shapes.length-1].style.left=e.x-e.r+"px",dom_shapes[dom_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_shapes[dom_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(dom_shapes[dom_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","circle")),svg_shapes[svg_shapes.length-1].setAttribute("cx",e.x),svg_shapes[svg_shapes.length-1].setAttribute("cy",e.y),svg_shapes[svg_shapes.length-1].setAttribute("r",e.r),svg_shapes[svg_shapes.length-1].setAttribute("fill",e.fill),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1])),renderer==WEBGL){var t,s,a,n;for(cakepen.globalAlpha=e.a,cakepen.fillStyle=e.stroke,cakepen.strokeStyle=e.fill,null==e.angle&&(e.angle=0),cakepen.rotate(e.angle/50),cakepen.beginPath(),t=0;t<360;t+=.1)s=t,a=e.r*Math.cos(s*Math.PI/180),n=e.r*Math.sin(s*Math.PI/180),cakepen.moveTo(e.x,e.y),cakepen.lineTo(a+e.x,n+e.y),cakepen.lineTo(a+e.x,n+e.y);for(cakepen.closePath(),cakepen.fill(),cakepen.stroke(),t=0;t<360;t+=.1)s=t,a=e.r*Math.cos(s*Math.PI/180),n=e.r*Math.sin(s*Math.PI/180),cakepen.fillRect(e.x+a,e.y+n,2,2);cakepen.rotate(-e.angle),cakepen.globalAlpha=1}},img:function(e){renderer!=CANVAS&&renderer!=WEBGL||(cakepen.globalAlpha=e.a,cakepen.rotate(e.angle/50),images.push(new Image(e.w,e.h)),images[images.length-1].src=e.img,cakepen.drawImage(images[images.length-1],e.x,e.y,e.w,e.h),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(dom_shapes.push(new Image),dom_shapes[dom_shapes.length-1].src=e.img,dom_shapes[dom_shapes.length-1].style.position="absolute",dom_shapes[dom_shapes.length-1].style.width=e.w+"px",dom_shapes[dom_shapes.length-1].style.height=e.h+"px",dom_shapes[dom_shapes.length-1].style.borderRadius=e.r+"px",dom_shapes[dom_shapes.length-1].style.top=e.y-e.h/60+"px",dom_shapes[dom_shapes.length-1].style.left=e.x-e.w/60+"px",dom_shapes[dom_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_shapes[dom_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(dom_shapes[dom_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","image")),svg_shapes[svg_shapes.length-1].setAttribute("href",e.img),svg_shapes[svg_shapes.length-1].setAttribute("x",e.x),svg_shapes[svg_shapes.length-1].setAttribute("y",e.y),svg_shapes[svg_shapes.length-1].setAttribute("rx",e.r),svg_shapes[svg_shapes.length-1].setAttribute("ry",e.r),svg_shapes[svg_shapes.length-1].setAttribute("width",e.w),svg_shapes[svg_shapes.length-1].setAttribute("height",e.h),svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1]))},text:function(e){renderer!=CANVAS&&renderer!=WEBGL||(cakepen.globalAlpha=e.a,cakepen.font=e.size+"px "+e.font,cakepen.fillStyle=e.fill,cakepen.strokeStyle=e.stroke,cakepen.rotate(e.angle/50),cakepen.fillText(e.txt,e.x,e.y),cakepen.strokeText(e.txt,e.x,e.y),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(dom_shapes.push(document.createElement("strong")),dom_shapes[dom_shapes.length-1].innerHTML=e.txt,dom_shapes[dom_shapes.length-1].style.fontFamily=e.font,dom_shapes[dom_shapes.length-1].style.fontSize=e.size+"px",dom_shapes[dom_shapes.length-1].style.position="absolute",dom_shapes[dom_shapes.length-1].style.color=e.fill,dom_shapes[dom_shapes.length-1].style.top=e.y-e.size/2+"px",dom_shapes[dom_shapes.length-1].style.left=e.x-e.size/2+"px",dom_shapes[dom_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_shapes[dom_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(dom_shapes[dom_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","text")),svg_shapes[svg_shapes.length-1].setAttribute("x",e.x),svg_shapes[svg_shapes.length-1].setAttribute("y",e.y),svg_shapes[svg_shapes.length-1].innerHTML=e.txt,svg_shapes[svg_shapes.length-1].setAttribute("fill",e.fill),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.fontFamily=e.font,svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,svg_shapes[svg_shapes.length-1].style.fontSize=e.size+"px",cakecanvas.appendChild(svg_shapes[svg_shapes.length-1]))},triangle:function(e){renderer!=CANVAS&&renderer!=WEBGL||(cakepen.globalAlpha=e.a,cakepen.strokeStyle=e.stroke,cakepen.fillStyle=e.fill,cakepen.lineWidth=e.line_width,cakepen.rotate(e.angle/50),cakepen.beginPath(),cakepen.moveTo(e.pos1[0],e.pos1[1]),cakepen.lineTo(e.pos2[0],e.pos2[1]),cakepen.lineTo(e.pos3[0],e.pos3[1]),cakepen.lineTo(e.pos1[0],e.pos1[1]),cakepen.closePath(),cakepen.fill(),cakepen.stroke(),cakepen.rotate(-e.angle),cakepen.globalAlpha=1),renderer==DOM&&(e.pos1[0]>biggest_x&&(biggest_x=e.pos1[0]),e.pos1[1]>biggest_y&&(biggest_y=e.pos1[1]),e.pos2[0]>biggest_x&&(biggest_x=e.pos2[0]),e.pos2[1]>biggest_y&&(biggest_y=e.pos2[1]),e.pos3[0]>biggest_x&&(biggest_x=e.pos3[0]),e.pos3[1]>biggest_y&&(biggest_y=e.pos3[1]),dom_svgs_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","polygon")),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("points",(e.pos1[0]+","+e.pos1[1]+" "+e.pos2[0]+","+e.pos2[1]+" "+e.pos3[0]+","+e.pos3[1]+" "+e.pos1[0]+","+e.pos1[1]).toString()),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("fill",e.fill),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("stroke",e.stroke),dom_svgs_shapes[dom_svgs_shapes.length-1].style.strokeWidth=e.line_width,dom_svgs_shapes[dom_svgs_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_svgs_shapes[dom_svgs_shapes.length-1].style.opacity=e.a,svg_board.appendChild(dom_svgs_shapes[dom_svgs_shapes.length-1])),renderer==SVG&&(svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","polygon")),svg_shapes[svg_shapes.length-1].setAttribute("points",(e.pos1[0]+","+e.pos1[1]+" "+e.pos2[0]+","+e.pos2[1]+" "+e.pos3[0]+","+e.pos3[1]+" "+e.pos1[0]+","+e.pos1[1]).toString()),svg_shapes[svg_shapes.length-1].setAttribute("fill",e.fill),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.strokeWidth=e.line_width,svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1]))},polygon:function(e){if(renderer==CANVAS||renderer==WEBGL){cakepen.globalAlpha=e.a,cakepen.fillStyle=e.fill,cakepen.strokeStyle=e.stroke,cakepen.rotate(e.angle/50),cakepen.beginPath(),cakepen.moveTo(e.points[0][0],e.points[0][1]);for(var t=0;t<e.points.length;t++)cakepen.lineTo(e.points[t][0],e.points[t][1]);cakepen.closePath(),cakepen.fill(),cakepen.stroke(),cakepen.rotate(-e.angle),cakepen.globalAlpha=1}if(renderer==DOM){domvg_polygon_points="",domvg_polygon_points+=e.points[0][0]+","+e.points[0][1]+" ";for(t=0;t<e.points.length;t++)e.points[t][0]>biggest_x&&(biggest_x=e.points[t][0]),e.points[t][1]>biggest_y&&(biggest_y=e.points[t][1]),domvg_polygon_points+=e.points[t][0]+","+e.points[t][1]+" ";dom_svgs_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","polygon")),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("points",domvg_polygon_points.toString()),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("fill",e.fill),dom_svgs_shapes[dom_svgs_shapes.length-1].setAttribute("stroke",e.stroke),dom_svgs_shapes[dom_svgs_shapes.length-1].style.transform="rotate("+e.angle+"deg)",dom_svgs_shapes[dom_svgs_shapes.length-1].style.opacity=e.a,svg_board.appendChild(dom_svgs_shapes[dom_svgs_shapes.length-1])}if(renderer==SVG){svg_shapes.push(document.createElementNS("http://www.w3.org/2000/svg","polygon")),domvg_polygon_points="",domvg_polygon_points+=e.points[0][0]+","+e.points[0][1]+" ";for(t=0;t<e.points.length;t++)domvg_polygon_points+=e.points[t][0]+","+e.points[t][1]+" ";svg_shapes[svg_shapes.length-1].setAttribute("points",domvg_polygon_points.toString()),svg_shapes[svg_shapes.length-1].setAttribute("fill",e.fill),svg_shapes[svg_shapes.length-1].setAttribute("stroke",e.stroke),svg_shapes[svg_shapes.length-1].style.transform="rotate("+e.angle+"deg)",svg_shapes[svg_shapes.length-1].style.opacity=e.a,cakecanvas.appendChild(svg_shapes[svg_shapes.length-1])}},clear:function(){if(renderer!=CANVAS&&renderer!=WEBGL||(cakepen.fillStyle="transparent",cakepen.fillRect(0,0,cakepen.canvas.width,cakepen.canvas.height),cakepen.clearRect(0,0,cakepen.canvas.width,cakepen.canvas.height)),renderer==DOM){for(doms=0;doms<dom_shapes.length;doms++)dom_shapes.slice(0,dom_shapes.length),cakecanvas.removeChild(dom_shapes[doms]);for(svid=0;svid<dom_svgs_shapes.length;svid++)dom_svgs_shapes.slice(0,dom_svgs_shapes.length),svg_board.removeChild(dom_svgs_shapes[svid])}if(renderer==SVG)for(svgos=0;svgos<dom_shapes.length;svgos++)svg_shapes.slice(0,svg_shapes.length),cakecanvas.removeChild(svg_shapes[svgos])},bgcolor:function(e){renderer!=CANVAS&&renderer!=WEBGL&&renderer!=SVG&&renderer!=DOM||(cakecanvas.style.backgroundColor=e),renderer==DOM&&(svg_board.style.backgroundColor=e)},bgimg:function(e){cakecanvas.style.backgroundImage="url("+e.src+")",cakecanvas.style.opacity=e.a},animate:function(e){if(renderer!=CANVAS&&renderer!=WEBGL&&renderer!=DOM||window.requestAnimationFrame(e.frame),renderer==SVG){svg_anims.push(document.createElementNS("http://www.w3.org/2000/svg","animate")),svg_anims[svg_anims.length-1].setAttribute("attributeType","XML"),svg_anims[svg_anims.length-1].setAttribute("attributeName",e.attr),svg_anims[svg_anims.length-1].setAttribute("dur",e.dur+"s"),svg_anims[svg_anims.length-1].setAttribute("to",e.to),svg_anims[svg_anims.length-1].setAttribute("from",e.from),svg_anims[svg_anims.length-1].setAttribute("repeatCount",e.loop_num),svg_anims[svg_anims.length-1].setAttribute("repeatDur",e.loop_dur),svg_anims[svg_anims.length-1].anim_id="animation-"+svg_anims[svg_anims.length-1],svg_anims[svg_anims.length-1].setAttribute("id",svg_anims[svg_anims.length-1].anim_id);var t=svg_shapes[e.index],s=document.getElementById(svg_anims[svg_anims.length-1].anim_id);null!=s&&t.removeChild(s),t.appendChild(svg_anims[svg_anims.length-1])}},interval:function(e,t){return setInterval(e,t)},timer:function(e,t){return setTimeout(e,t)},update:function(e,t){return window.update(e,t)},pause:function(e){null!=e.interval||renderer!=DOM&&renderer!=CANVAS&&renderer!=WEBGL||window.cancelAnimationFrame(e.frame),null==e.interval||renderer!=DOM&&renderer!=CANVAS&&renderer!=WEBGL||window.clearInterval(e.interval)}},rgb=function(e){return"rgb("+e.r+","+e.g+","+e.b+")"},rgba=function(e){return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hsl=function(e){return"hsl("+e.h+","+e.s+","+e.l+")"},hsla=function(e){return"hsla("+e.h+","+e.s+","+e.l+","+e.a+")"};window.addEventListener("keypress",(function(e){"f"!=e.key||window.fullscreen||document.documentElement.requestFullscreen(),"f"==e.key&&window.fullscreen&&document.documentElement.exitFullscreen()}));